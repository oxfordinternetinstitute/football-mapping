L.Control.Zoomslider=L.Control.extend({options:{position:"bottomleft",stepHeight:9},onAdd:function(a){var b=L.DomUtil.create("div","leaflet-control-zoomslider");L.DomEvent.disableClickPropagation(b);this._map=a;this._zoomInButton=this._createButton("Zoom in","leaflet-control-zoomslider-in",b,this._zoomIn,this);this._createSlider("leaflet-control-zoomslider-slider",b,a);this._zoomOutButton=this._createButton("Zoom out","leaflet-control-zoomslider-out",b,this._zoomOut,this);a.on("layeradd layerremove",
this._refresh,this);this._snapToSliderValue();a.on("zoomend",this._snapToSliderValue,this);return b},onRemove:function(a){a.off("zoomend",this._snapToSliderValue);a.off("layeradd layerremove",this._refresh)},_refresh:function(){this._map.removeControl(this).addControl(this)},_createSlider:function(a,b,c){c=c.getMaxZoom()-c.getMinZoom();if(Infinity!=c)return this._sliderHeight=this.options.stepHeight*c,b=L.DomUtil.create("div",a+"-wrap",b),b.style.height=this._sliderHeight+5+"px",b=L.DomUtil.create("div",
a,b),this._knob=L.DomUtil.create("div",a+"-knob",b),this._draggable=this._createDraggable(),this._draggable.enable(),L.DomEvent.on(b,"click",this._onSliderClick,this),b},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,e){b=L.DomUtil.create("a",b,c);b.href="#";b.title=a;L.DomEvent.on(b,"click",L.DomEvent.preventDefault).on(b,"click",d,e);return b},_createDraggable:function(){L.DomUtil.setPosition(this._knob,
L.point(0,0));L.DomEvent.disableClickPropagation(this._knob);var a=new L.Bounds(L.point(0,0),L.point(0,this._sliderHeight));return(new L.BoundedDraggable(this._knob,this._knob,a)).on("drag",this._snap,this).on("dragend",this._setZoom,this)},_snap:function(){this._snapToSliderValue(this._posToSliderValue())},_setZoom:function(){this._map.setZoom(this._toZoomLevel(this._posToSliderValue()))},_onSliderClick:function(a){a=a.touches&&1===a.touches.length?a.touches[0]:a;a=this._posToSliderValue((a.offsetY?
a.offsetY:L.DomEvent.getMousePosition(a).y-L.DomUtil.getViewportOffset(this._knob).y)-this._knob.offsetHeight/2);this._snapToSliderValue(a);this._map.setZoom(this._toZoomLevel(a))},_posToSliderValue:function(a){a=isNaN(a)?L.DomUtil.getPosition(this._knob).y:a;return Math.round((this._sliderHeight-a)/this.options.stepHeight)},_snapToSliderValue:function(a){this._updateDisabled();this._knob&&(a=isNaN(a)?this._getSliderValue():a,L.DomUtil.setPosition(this._knob,L.point(0,this._sliderHeight-a*this.options.stepHeight)))},
_toZoomLevel:function(a){return a+this._map.getMinZoom()},_toSliderValue:function(a){return a-this._map.getMinZoom()},_getSliderValue:function(){return this._toSliderValue(this._map.getZoom())},_updateDisabled:function(){var a=this._map;L.DomUtil.removeClass(this._zoomInButton,"leaflet-control-zoomslider-disabled");L.DomUtil.removeClass(this._zoomOutButton,"leaflet-control-zoomslider-disabled");a.getZoom()===a.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,"leaflet-control-zoomslider-disabled");
a.getZoom()===a.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,"leaflet-control-zoomslider-disabled")}});L.Map.mergeOptions({zoomControl:!1,zoomsliderControl:!0});L.Map.addInitHook(function(){this.options.zoomsliderControl&&L.control.zoomslider().addTo(this)});L.control.zoomslider=function(a){return new L.Control.Zoomslider(a)};
L.BoundedDraggable=L.Draggable.extend({initialize:function(a,b,c){L.Draggable.prototype.initialize.call(this,a,b);this._bounds=c;this.on("predrag",function(){this._bounds.contains(this._newPos)||(this._newPos=this._fitPoint(this._newPos))},this)},_fitPoint:function(a){a=L.point(Math.min(a.x,this._bounds.max.x),Math.min(a.y,this._bounds.max.y));a.x=Math.max(a.x,this._bounds.min.x);a.y=Math.max(a.y,this._bounds.min.y);return a}});
